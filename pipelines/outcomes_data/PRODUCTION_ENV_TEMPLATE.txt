# ========================================
# Production Database Connection Settings
# ========================================
# Add these to your .env.local file after filling in the values
#
# To find these values:
# 1. Go to your Supabase project dashboard (https://supabase.com/dashboard)
# 2. Select your production project
# 3. Go to: Project Settings → Database
# 4. Under "Connection string" → select "Connection pooling"
# 5. Copy the connection string and extract the values below

# Example connection string:
# postgres://postgres.abc123xyz:your-password@aws-0-us-west-1.pooler.supabase.com:6543/postgres
#              ^^^^^^^^^^^^^^^^                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ ^^^^
#              |       |                       |                                        |
#              |       TENANT_ID              POOLER_HOST                            POOLER_PORT
#              PROD_DB_USER

# Production Supabase Pooler Connection
PROD_POOLER_HOST=                    # e.g., aws-0-us-west-1.pooler.supabase.com
PROD_POOLER_PORT=6543                # Usually 6543 for transaction mode, 5432 for session mode
PROD_DB_PASSWORD=                    # Your Supabase database password
PROD_TENANT_ID=                      # Your project reference ID (from connection string)
PROD_DB_NAME=postgres                # Usually 'postgres'
PROD_DB_USER=postgres                # Usually 'postgres'

# ========================================
# How the connection works:
# ========================================
# The pipeline will construct a connection URL like:
# postgres://postgres@{TENANT_ID}:{PASSWORD}@{POOLER_HOST}:{POOLER_PORT}/postgres
#
# This uses Supavisor (Supabase's connection pooler) which requires
# the username format: postgres@{TENANT_ID}

# ========================================
# Testing the connection:
# ========================================
# After adding these to .env.local, test with:
#   cd pipelines/outcomes_data
#   source ../../.env.local
#   ./test_prod_connection.sh
